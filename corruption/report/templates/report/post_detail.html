{% extends 'base.html' %}

{% block title %}
    {{ post.title }}
{% endblock %}

{% block content %}
    <div>
        <h1>{{ post.title }}</h1>
        <iframe src="{{ post.file.url }}" width="100%" height="500px"></iframe>
        <p>{{ post.description }}</p>
    </div>

    <div>
        <h2>Live Chat</h2>
        <div id="chat-messages">
            <!-- Messages will be loaded here -->
        </div>

        <form id="chat-form">
            <input type="text" id="message-input" placeholder="Type your message here...">
            <button type="submit">Send</button>
        </form>
    </div>

    <!-- Load initial messages -->
    <script>
        window.onload = function() {
            loadMessages('{{ post.id }}');
            setInterval(function() {
                loadMessages('{{ post.id }}');
            }, 5000); // Refresh messages every 5 seconds
        };
    </script>
    {% load static %}
    <script src="{% static 'report/live_chat.js' %}"></script>
{% endblock %}
